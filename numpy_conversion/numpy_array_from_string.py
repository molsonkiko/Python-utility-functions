import re
import numpy as np
numregex = '-?(?:\d*\.?\d+|\d+\.|nan|inf)' #does not handle complex numbers yet, but tolerates float('nan') and np.inf

split_brackets = lambda string_: re.split('[\[\]\)\(]+,?',string_)

is_not_stub_row = lambda string_: (re.fullmatch('^\s*$',string_) is None)

not_whitespace_rows = lambda string_: list(filter(is_not_stub_row,split_brackets(string_)))

remake_array = lambda string_list: [list(map(float,re.findall(numregex,x)))
							 for x in string_list]

def numpy_array_from_string(array_string):
	brack_split = not_whitespace_rows(array_string)
	new_arr = remake_array(brack_split)
	return np.array(new_arr)

myarr_string = '''[[1 2
3 4][2 3
45 -3] [4.3234 -5.6
0. 7.]]'''

myarr = np.array([[1,2,3,4],[2,3,45,-3],[4.3234,-5.6,0,7]])
        
#below is the canonical string representation of np.eye(25)
eye25_string = '''([[1., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
		0., 0., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 1., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
		0., 0., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 1., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
		0., 0., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 1., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
		0., 0., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 1., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
		0., 0., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 1., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
		0., 0., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 1., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
		0., 0., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 1., 0., 0., 0., 0., 0., 0., 0., 0.,
		0., 0., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 0., 1., 0., 0., 0., 0., 0., 0., 0.,
		0., 0., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 0., 0., 1., 0., 0., 0., 0., 0., 0.,
		0., 0., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 1., 0., 0., 0., 0., 0.,
		0., 0., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 1., 0., 0., 0., 0.,
		0., 0., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 1., 0., 0., 0.,
		0., 0., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 1., 0., 0.,
		0., 0., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 1., 0.,
		0., 0., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 1.,
		0., 0., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
		1., 0., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
		0., 1., 0., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
		0., 0., 1., 0., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
		0., 0., 0., 1., 0., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
		0., 0., 0., 0., 1., 0., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
		0., 0., 0., 0., 0., 1., 0., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
		0., 0., 0., 0., 0., 0., 1., 0., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
		0., 0., 0., 0., 0., 0., 0., 1., 0.],
	   [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
		0., 0., 0., 0., 0., 0., 0., 0., 1.]])'''
		
eye25 = numpy_array_from_string(eye25_string)
